# Layer 2: 客户端单独测试 (人工)

## 准备工作
1. 确保服务端正在运行
2. `cd client && npm run tauri dev`

---

## T2.1: 托盘图标
- [ ] 托盘区域出现 GhostType 图标 (不是空白/默认)
- [ ] 右键点击显示菜单 (Show / Hide / Quit)
- [ ] 点击 Show 显示窗口
- [ ] 点击 Hide 隐藏窗口
- [ ] 点击 Quit 正常退出 (无崩溃)

失败处理:
- 检查 `client/src-tauri/src/main.rs` 的 `TrayIconBuilder::new().icon(...)` 是否生效
- 检查 `client/src-tauri/icons/32x32.png` 是否存在

---

## T2.2: 热键监听
- [ ] 按下 CapsLock，控制台输出相关日志
- [ ] 松开 CapsLock，控制台输出相关日志
- [ ] CapsLock 原有功能行为: ______________ (记录: 是否被拦截/是否影响大小写切换)

失败处理:
- 检查 rdev 是否正常工作
- Windows 是否有权限/被安全软件拦截

---

## T2.3: 麦克风权限
- [ ] 按下 CapsLock 后，控制台无 `no input device` 错误
- [ ] 控制台显示采样率: ________ Hz
- [ ] Windows 麦克风权限:
  - [ ] 未弹窗 (已有权限)
  - [ ] 弹窗并点击允许
  - [ ] 被拒绝 → 需要手动在设置中开启

失败处理:
- Windows 设置 → 隐私 → 麦克风 → 允许应用访问

---

## T2.4: 网络发送
观察服务端控制台:
- [ ] 显示 WebSocket 连接建立
- [ ] 按住 CapsLock 后，服务端显示收到 `start` 消息
- [ ] 服务端显示收到 binary 音频帧
- [ ] 松开后，服务端显示收到 `stop` 消息

失败处理:
- 检查 `client/config.json` 的 `server_endpoints` 配置
- 检查服务端端口/防火墙/同网段

---

## T2.5: 键盘注入
1. 打开记事本，光标聚焦
2. 按住 CapsLock 说 “测试”，松开
3. 观察:
   - [ ] 服务端返回 `fast_text`
   - [ ] 记事本中出现文字
   - [ ] 文字内容: ______________

失败处理:
- 如果有日志但无文字输出，检查 enigo 权限
- 如果文字乱码，检查编码/输入法状态

---

## 签字确认
- 测试人: ______________
- 日期: ______________
- 结果: [ ] 全部通过  [ ] 有问题需修复

